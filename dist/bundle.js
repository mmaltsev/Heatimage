!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Heatimage=t():e.Heatimage=t()}(this,function(){return function(e){function t(a){if(n[a])return n[a].exports;var r=n[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=5)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(2))},function(e,t,n){"use strict";function a(e){for(var t=[],n=0,a=e;n<a.length;n++){var i=a[n];t.push({x:i[0],y:i[1],value:i[2]})}r(t,"heatpath.json","application/json")}function r(e,t,n){var a=JSON.stringify(e),r=document.createElement("a");r.id="downloadJSON";var i=new Blob([a],{type:n});r.href=URL.createObjectURL(i),r.download=t,r.click()}function i(e,t){if(t.width>0){var n=o(e,t),a=document.createElement("a");a.href=n,a.download="heat_image.png",a.click()}else alert("Nothing to save!")}function o(e,t){var n=document.createElement("canvas");n.width=e.width,n.height=e.height;var a=n.getContext("2d");return a.drawImage(e,0,0),a.drawImage(t,0,0),n.toDataURL("image/png")}Object.defineProperty(t,"__esModule",{value:!0}),t.saveAsJSON=a,t.saveAsPNG=i,t.canvasToPng=o},function(e,t,n){"use strict";function a(e,t){if(e){var n=t.heatValue,a=t.heatRadius,o=t.heatBlur,s=t.colorGradient,h=t.exporting,f=t.edit,p=t.keys,g=t.displayCanvas,m=t.defaultData;return y=n,f&&(document.addEventListener("mousedown",d),document.addEventListener("mouseup",u),document.addEventListener("mousemove",c),p&&(document.onkeydown=l)),i(e,s,a,o,h,f,g,m),r(e)}console.error("Heatimage Error: No image specified")}function r(e){var t=document.createElement("img");return t.src=_.canvasToPng(e,b),t}function i(e,t,n,a,r,i,d,u){var c=o(e,i,d);g=S(b,x.gradientPalettes,t),g.radius(n,a),u&&(k=f(u),g.data(k),g.draw()),r&&s(e,c)}function o(e,t,n){var a=document.createElement("div");return b=document.createElement("canvas"),b.style.display=n?"initial":"none",a.appendChild(b),e.parentNode.insertBefore(a,e.nextSibling),w.applyStyles(a,w.canvasWrapperStyle(e)),b.width=e.width,b.height=e.height,b.style.cursor=t?"crosshair":"default",e.style.userSelect="none",a}function s(e,t){var n=document.createElement("div"),a=document.createElement("div");t.appendChild(n),t.appendChild(a),n.innerHTML=w.menuInnerHTML,a.innerHTML=w.menuExpandedInnerHTML,w.applyStyles(n,w.menuStyle),w.applyStyles(a,w.menuExpandedStyle),document.querySelector("#heatimageSaveAsJSON").addEventListener("click",function(){return _.saveAsJSON(k)}),document.querySelector("#heatimageSaveAsPNG").addEventListener("click",function(){return _.saveAsPNG(e,b)}),n.addEventListener("mouseover",function(){n.style.background="rgb(247, 247, 247)",a.style.display="initial"}),a.addEventListener("mouseleave",function(){n.style.background="rgb(255, 255, 255)",a.style.display="none"})}function d(e){h(e.clientX,e.clientY)&&0===e.button&&(p=!p,P.push(0),m=[],v=[])}function u(e){p=!1}function c(e){var t=e.clientX,n=e.clientY;p&&h(t,n)&&(k.push([t,n,y]),g.clear(),g.data(k),g.draw(),P[P.length-1]++)}function l(e){if(e.ctrlKey&&90===e.keyCode&&P.length>0){p=!1;var t=P.pop();v.push(t);for(var n=0;n<t;n++)m.push(k.pop());g.data(k),g.draw()}else if(e.ctrlKey&&89===e.keyCode&&v.length>0){p=!1;var a=v.pop();P.push(a);for(var n=0;n<a;n++)k.push(m.pop());g.data(k),g.draw()}}function h(e,t){return e<=b.width&&t<=b.height}function f(e){return e.map(function(e){return Object.keys(e).map(function(t){return e[t]})})}Object.defineProperty(t,"__esModule",{value:!0});var p,g,m,v,y,b,_=n(1),w=n(3),x=n(4),S=n(6),k=[],P=[];t.heatimage=a},function(e,t,n){"use strict";function a(e){return{display:"block",marginTop:""+-e.height,position:"relative",width:""+e.width,height:""+e.height}}function r(e,t){for(var n in t)t.hasOwnProperty(n)&&(e.style[n]=t[n])}Object.defineProperty(t,"__esModule",{value:!0}),t.canvasWrapperStyle=a,t.applyStyles=r,t.menuStyle={position:"absolute",top:"10px",right:"10px",padding:"5px",cursor:"pointer",background:"rgb(255, 255, 255)",border:"2px solid rgba(0,0,0,0.2)",borderRadius:"5px"},t.menuExpandedStyle={position:"absolute",top:"10px",right:"10px",background:"rgb(255, 255, 255)",border:"2px solid rgba(0,0,0,0.2)",borderRadius:"5px",display:"none"},t.menuExpandedInnerHTML='<style>.heatimage-menu-element { display: block; cursor: pointer; padding: 7px; font-size: 14px; } .heatimage-menu-element:hover { background-color: #f0f0f0; }</style><span class="heatimage-menu-element" id="heatimageSaveAsPNG">Save as PNG</span><span class="heatimage-menu-element" id="heatimageSaveAsJSON">Save as JSON</span>',t.menuInnerHTML='<svg class="feather-menu" xmlns="http://www.w3.org/2000/svg" stroke-width="3" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" data-reactid="791"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>'},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.gradientPalettes={"Black Aqua White":{0:"Black",.5:"Aqua",1:"White"},"Blue Red":{0:"blue",1:"red"},"Dark Green":{.1:"#ecf7ee",.2:"#b9dec0",.4:"#b9dec0",.5:"#64a171",.6:"#437e4f",.7:"#275731",.8:"#102c16",1:"#000000"},"Deep Sea":{0:"rgb(0, 0, 0)",.6:"rgb(24, 53, 103)",.75:"rgb(46, 100, 158)",.9:"rgb(23, 173, 203)",1:"rgb(0, 250, 250)"},"ColorBrewer Blues":{0:"#ebf0ff",.2:"#bad2eb",.4:"#8ebeda",.5:"#5a9ecc",.6:"#357eb9",.8:"#1c5ba6",1:"#0b3281"},"Color Spectrum":{0:"Navy",.25:"Blue",.5:"Green",.75:"Yellow",1:"Red"},Incandescent:{0:"Black",.33:"DarkRed",.66:"Yellow",1:"White"},Heat:{0:"#dbe2af",.2:"#edd96e",.4:"#f3bf5e",.5:"#e89b53",.6:"#cf7047",.8:"#a93e3c",1:"#7a002d"},"Heated Metal":{0:"Black",.4:"Purple",.6:"Red",.8:"Yellow",1:"White"},Sunrise:{0:"Red",.66:"Yellow",1:"White"},"Stepped Colors":{0:"Navy",.25:"Navy",.26:"Green",.5:"Green",.51:"Yellow",.75:"Yellow",.76:"Red",1:"Red"},Viridis:{0:"#fce51e",.2:"#7fd335",.4:"#2fac66",.5:"#1f7f79",.6:"#26547b",.8:"#342870",1:"#340042"},"Visible Spectrum":{0:"rgb(255,0,255)",.25:"rgb(0,0,255)",.5:"rgb(0,255,0)",.75:"rgb(255,255,0)",1:"rgb(255,0,0)"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(0))},function(e,t,n){"use strict";function a(e,t,n){if(!(this instanceof a))return new a(e,t,n);this._canvas=e="string"==typeof e?document.getElementById(e):e,this._ctx=e.getContext("2d"),this._width=e.width,this._height=e.height,this._max=1,this._data=[],this._defaultGradients=t,this._defaultGradientName=n}e.exports=a,a.prototype={defaultRadius:25,data:function(e){return this._data=e,this},max:function(e){return this._max=e,this},add:function(e){return this._data.push(e),this},clear:function(){return this._data=[],this},radius:function(e,t){t=void 0===t?15:t;var n=this._circle=this._createCanvas(),a=n.getContext("2d"),r=this._r=e+t;return n.width=n.height=2*r,a.shadowOffsetX=a.shadowOffsetY=2*r,a.shadowBlur=t,a.shadowColor="black",a.beginPath(),a.arc(-r,-r,e,0,2*Math.PI,!0),a.closePath(),a.fill(),this},resize:function(){this._width=this._canvas.width,this._height=this._canvas.height},gradient:function(e){var t=this._createCanvas(),n=t.getContext("2d"),a=n.createLinearGradient(0,0,0,256);t.width=1,t.height=256;for(var r in e)a.addColorStop(+r,e[r]);return n.fillStyle=a,n.fillRect(0,0,1,256),this._grad=n.getImageData(0,0,1,256).data,this},draw:function(e){this._circle||this.radius(this.defaultRadius),this._grad||this.gradient(this._defaultGradients[this._defaultGradientName]);var t=this._ctx;t.clearRect(0,0,this._width,this._height);for(var n,a=0,r=this._data.length;a<r;a++)n=this._data[a],t.globalAlpha=Math.max(n[2]/this._max,void 0===e?.05:e),t.drawImage(this._circle,n[0]-this._r,n[1]-this._r);var i=t.getImageData(0,0,this._width,this._height);return this._colorize(i.data,this._grad),t.putImageData(i,0,0),this},_colorize:function(e,t){for(var n,a=0,r=e.length;a<r;a+=4)(n=4*e[a+3])&&(e[a]=t[n],e[a+1]=t[n+1],e[a+2]=t[n+2])},_createCanvas:function(){return"undefined"!=typeof document?document.createElement("canvas"):new this._canvas.constructor}}}])});